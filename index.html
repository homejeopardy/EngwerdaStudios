<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Engwerda Studios</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff;
      color: #000;
    }
    header {
      background-color: #b30000;
      color: white;
      padding: 20px;
      text-align: center;
      font-family: "American Typewriter", serif;
      font-size: 2em;
      letter-spacing: 2px;
    }
    main {
      padding: 20px;
    }
    .login {
      max-width: 300px;
      margin: 100px auto;
      text-align: center;
    }
    .login input {
      padding: 10px;
      width: 80%;
      margin-bottom: 10px;
    }
    .login button {
      padding: 10px 20px;
      background-color: #b30000;
      color: white;
      border: none;
      cursor: pointer;
    }
    .file-item {
      display: inline-block;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }
    .file-item img {
      width: 64px;
      height: 64px;
    }
    .admin-panel {
      margin-top: 20px;
      padding: 15px;
      border: 2px solid #b30000;
      border-radius: 10px;
      background-color: #f9f9f9;
    }
    .admin-panel h3 {
      margin-top: 0;
      color: #b30000;
    }
    input, select, button {
      margin: 5px 0;
    }
    .back-btn {
      display: block;
      margin-bottom: 20px;
      color: #b30000;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>Engwerda Studios</header>
  <main id="content">
    <div class="login" id="login">
      <h2>Enter Password</h2>
      <input type="password" id="password" placeholder="Password">
      <br>
      <button onclick="checkPassword()">Enter</button>
    </div>
  </main>

  <script>
    let currentPath = [];
    let isAdmin = false;

    // Load saved structure from localStorage or default
    let siteStructure = JSON.parse(localStorage.getItem("engwerdaData")) || {
      folders: {
        "Projects": { folders: {}, links: { "Website": "https://example.com" } }
      },
      links: {
        "Studio Reel": "https://example.com/reel.mp4"
      }
    };

    function saveStructure() {
      localStorage.setItem("engwerdaData", JSON.stringify(siteStructure));
    }

    function checkPassword() {
      const pw = document.getElementById("password").value;
      if (pw === "Austin") {
        isAdmin = false;
        loadPage();
      } else if (pw === "Admin") {
        isAdmin = true;
        loadPage();
      } else {
        alert("Incorrect password");
      }
    }

    function getCurrentFolder() {
      let folder = siteStructure;
      for (let p of currentPath) {
        folder = folder.folders[p];
      }
      return folder;
    }

    function loadPage() {
      const content = document.getElementById("content");
      let folder = getCurrentFolder();

      let html = "";
      if (currentPath.length > 0) {
        html += `<div class="back-btn" onclick="goBack()">â¬… Back</div>`;
      } else {
        html += `
          <h2>Welcome to Engwerda Studios</h2>
          <p>Engwerda Studios is a creative hub for film, music, and digital media. 
          We specialize in storytelling that inspires, challenges, and connects audiences worldwide.</p>
          <p>Explore our projects, collaborations, and archives using the folders and links below.</p>
        `;
      }

      // Display folders
      for (let f in folder.folders) {
        html += `
          <div class="file-item" onclick="enterFolder('${f}')">
            <img src="https://img.icons8.com/fluency/96/folder-invoices.png" alt="folder">
            <div>${f}</div>
          </div>`;
      }

      // Display links
      for (let l in folder.links) {
        html += `
          <div class="file-item" onclick="window.open('${folder.links[l]}','_blank')">
            <img src="https://img.icons8.com/fluency/96/document.png" alt="link">
            <div>${l}</div>
          </div>`;
      }

      if (isAdmin) {
        html += `
          <div class="admin-panel">
            <h3>Admin Panel</h3>
            <label>New Folder:</label><br>
            <input type="text" id="newFolder" placeholder="Folder name">
            <button onclick="addFolder()">Add Folder</button><br>

            <label>New Link:</label><br>
            <input type="text" id="newLinkName" placeholder="Link name"><br>
            <input type="text" id="newLinkUrl" placeholder="Link URL">
            <button onclick="addLink()">Add Link</button>
          </div>
        `;
      }

      content.innerHTML = html;
    }

    function enterFolder(name) {
      currentPath.push(name);
      loadPage();
    }

    function goBack() {
      currentPath.pop();
      loadPage();
    }

    function addFolder() {
      const name = document.getElementById("newFolder").value.trim();
      if (name) {
        let folder = getCurrentFolder();
        if (!folder.folders[name]) {
          folder.folders[name] = { folders: {}, links: {} };
          saveStructure();
          loadPage();
        } else {
          alert("Folder already exists!");
        }
      }
    }

    function addLink() {
      const name = document.getElementById("newLinkName").value.trim();
      const url = document.getElementById("newLinkUrl").value.trim();
      if (name && url) {
        let folder = getCurrentFolder();
        folder.links[name] = url;
        saveStructure();
        loadPage();
      }
    }
  </script>
</body>
</html>
