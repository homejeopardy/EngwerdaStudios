<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Engwerda Studios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background-color: #fff;
      color: #000;
    }
    header {
      background-color: #b30000;
      color: white;
      padding: 20px;
      text-align: center;
      font-family: "American Typewriter", serif;
      font-size: 2em;
    }
    #login, #studio, #admin {
      display: none;
      padding: 20px;
    }
    .folder, .link {
      display: inline-block;
      margin: 10px;
      padding: 20px;
      background: #f2f2f2;
      border: 2px solid #b30000;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      width: 120px;
    }
    .folder:hover, .link:hover {
      background: #ffe6e6;
    }
    .controls {
      margin-top: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 15px;
      border: none;
      background: #b30000;
      color: white;
      cursor: pointer;
      border-radius: 6px;
    }
    button:hover {
      background: #800000;
    }
    h2 {
      color: #b30000;
    }
  </style>
</head>
<body>
  <header>Engwerda Studios</header>

  <!-- LOGIN -->
  <div id="login">
    <h2>Enter Password</h2>
    <input type="password" id="password">
    <button onclick="checkPassword()">Enter</button>
  </div>

  <!-- STUDIO PAGE -->
  <div id="studio">
    <h2>Welcome to Engwerda Studios</h2>
    <p>
      Engwerda Studios is a creative production house dedicated to innovative storytelling, 
      visual design, and immersive media. We combine artistry and technology to bring 
      ideas to life â€” from concept development to full production.
    </p>
    <div id="fileArea"></div>
    <button onclick="goBack()">Back</button>
  </div>

  <!-- ADMIN PANEL -->
  <div id="admin">
    <h2>Admin Panel</h2>
    <div class="controls">
      <input type="text" id="folderName" placeholder="Folder Name">
      <button onclick="addFolder()">Add Folder</button><br>
      <input type="text" id="linkName" placeholder="Link Name">
      <input type="text" id="linkURL" placeholder="Link URL">
      <button onclick="addLink()">Add Link</button>
    </div>
    <div id="adminFileArea"></div>
    <button onclick="goBack()">Back</button>
  </div>

  <script>
    // Load structure from localStorage or default
    let structure = JSON.parse(localStorage.getItem("engwerdaStructure")) || { root: [] };
    let currentPath = ["root"];
    let isAdmin = false;

    function saveStructure() {
      localStorage.setItem("engwerdaStructure", JSON.stringify(structure));
    }

    function checkPassword() {
      let pw = document.getElementById("password").value;
      if (pw === "Austin") {
        isAdmin = false;
        document.getElementById("login").style.display = "none";
        document.getElementById("studio").style.display = "block";
        render();
      } else if (pw === "Admin") {
        isAdmin = true;
        document.getElementById("login").style.display = "none";
        document.getElementById("admin").style.display = "block";
        renderAdmin();
      } else {
        alert("Wrong password");
      }
    }

    function getCurrentFolder() {
      let folder = structure;
      for (let part of currentPath) folder = folder[part];
      return folder;
    }

    function render() {
      let folder = getCurrentFolder();
      let area = document.getElementById("fileArea");
      area.innerHTML = "";
      folder.forEach((item, idx) => {
        let div = document.createElement("div");
        div.className = item.type;
        div.innerText = item.name;
        if (item.type === "folder") {
          div.onclick = () => { currentPath.push(item.name); render(); };
        } else if (item.type === "link") {
          div.onclick = () => { window.open(item.url, "_blank"); };
        }
        area.appendChild(div);
      });
    }

    function renderAdmin() {
      let folder = getCurrentFolder();
      let area = document.getElementById("adminFileArea");
      area.innerHTML = "";
      folder.forEach((item, idx) => {
        let div = document.createElement("div");
        div.className = item.type;
        div.innerText = item.name;
        if (item.type === "folder") {
          div.onclick = () => { currentPath.push(item.name); renderAdmin(); };
        } else if (item.type === "link") {
          div.onclick = () => { window.open(item.url, "_blank"); };
        }
        // delete button
        let delBtn = document.createElement("button");
        delBtn.innerText = "Delete";
        delBtn.onclick = (e) => { 
          e.stopPropagation();
          folder.splice(idx, 1); 
          saveStructure(); 
          renderAdmin(); 
        };
        div.appendChild(delBtn);
        area.appendChild(div);
      });
    }

    function addFolder() {
      const name = document.getElementById("folderName").value.trim();
      if (!name) return alert("Enter folder name");
      let folder = getCurrentFolder();
      folder.push({ type: "folder", name: name, [name]: [] });
      document.getElementById("folderName").value = "";
      saveStructure();
      renderAdmin();
    }

    function addLink() {
      const name = document.getElementById("linkName").value.trim();
      const url = document.getElementById("linkURL").value.trim();
      if (!name || !url) return alert("Enter link name and URL");
      let folder = getCurrentFolder();
      folder.push({ type: "link", name: name, url: url });
      document.getElementById("linkName").value = "";
      document.getElementById("linkURL").value = "";
      saveStructure();
      renderAdmin();
    }

    function goBack() {
      if (currentPath.length > 1) {
        currentPath.pop();
        if (isAdmin) renderAdmin();
        else render();
      }
    }

    document.getElementById("login").style.display = "block";
  </script>
</body>
</html>
